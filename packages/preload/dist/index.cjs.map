{"version":3,"file":"index.cjs","sources":["../../common/const.ts","../src/index.ts"],"sourcesContent":["export enum AllowTypes {\n  JPG = \"image/jpeg\",\n  JPEG = \"image/jpeg\",\n  PNG = \"image/png\",\n  APNG = \"image/apng\",\n  WEBP = \"image/webp\",\n  GIF = \"image/gif\",\n  AVIF = \"image/avif\",\n  SVG = \"image/svg+xml\",\n}\n\nexport enum IPCEvents {\n  // 退出应用程序\n  QuitApp = \"QuitApp\",\n  // 最小化应用程序\n  MiniApp = \"MiniApp\",\n  // 添加图片列表\n  AddImages = \"AddImages\",\n  // 清空图片列表\n  EmptyImages = \"EmptyImages\",\n  // 清空完成\n  EmptyOver = \"EmptyOver\",\n  // 选取图片\n  PickImages = \"PickImages\",\n  // 状态更新\n  StatusUpdate = \"StatusUpdate\"\n}\n\nexport interface ImageItem {\n  // 0：完成压缩，1：正在压缩\n  status: 0 | 1;\n  path: string;\n  name?: string;\n  oldSize?: number;\n  newSize?: number;\n}\n\n","import { contextBridge, ipcRenderer } from \"electron\";\nimport { type ImageItem, IPCEvents } from \"@common/const\";\n// import { IPC } from \"./IPC\";\n\nexport type Callback = (...data: any[]) => void;\n\n/**\n * 处理渲染进程发送给主进程的消息\n */\ncontextBridge.exposeInMainWorld(\"PicMin\", {\n  // 关闭app\n  closeApp() {\n    ipcRenderer.send(IPCEvents.QuitApp);\n  },\n  // 最小化app\n  miniApp() {\n    ipcRenderer.send(IPCEvents.MiniApp);\n  },\n  // 选取图片\n  pickImages() {\n    ipcRenderer.send(IPCEvents.PickImages);\n  },\n  // 向图片列表中添加图片\n  addImages(imageList: Array<ImageItem>) {\n    ipcRenderer.send(IPCEvents.AddImages, imageList);\n  },\n  // 清空图片列表\n  emptyImages() {\n    ipcRenderer.send(IPCEvents.EmptyImages);\n  },\n});\n\n/**\n * 处理渲主进程发送给渲染进程的消息\n */\ncontextBridge.exposeInMainWorld(\"PicMinMessage\", {\n  // 清空完成触发\n  onEmptyOver(callback: Callback) {\n    ipcRenderer.on(IPCEvents.EmptyOver, callback);\n  },\n  // 状态更新触发\n  onStatusUpdate(callback: Callback) {\n    ipcRenderer.on(IPCEvents.StatusUpdate, (_, ...data: any[]) =>\n      callback(...data)\n    );\n  },\n  // 取消监听所有\n  unListenAll() {\n    ipcRenderer.removeAllListeners(IPCEvents.EmptyOver);\n    ipcRenderer.removeAllListeners(IPCEvents.StatusUpdate);\n  },\n});\n"],"names":["contextBridge"],"mappings":";;IAAY;AAAL,UAAK,aAAL;uBACC;wBACC;uBACD;wBACC;wBACA;uBACD;wBACC;uBACD;AAAA,GARI;IAWA;AAAL,UAAK,YAAL;0BAEK;0BAEA;4BAEE;8BAEE;4BAEF;6BAEC;+BAEE;AAAA,GAdL;ACFZA,uBAAc,kBAAkB,UAAU;AAAA,EAExC,WAAW;yBACG,KAAK,UAAU;AAAA;AAAA,EAG7B,UAAU;yBACI,KAAK,UAAU;AAAA;AAAA,EAG7B,aAAa;yBACC,KAAK,UAAU;AAAA;AAAA,EAG7B,UAAU,WAA6B;yBACzB,KAAK,UAAU,WAAW;AAAA;AAAA,EAGxC,cAAc;yBACA,KAAK,UAAU;AAAA;AAAA;AAO/BA,uBAAc,kBAAkB,iBAAiB;AAAA,EAE/C,YAAY,UAAoB;yBAClB,GAAG,UAAU,WAAW;AAAA;AAAA,EAGtC,eAAe,UAAoB;yBACrB,GAAG,UAAU,cAAc,CAAC,MAAM,SAC5C,SAAS,GAAG;AAAA;AAAA,EAIhB,cAAc;yBACA,mBAAmB,UAAU;yBAC7B,mBAAmB,UAAU;AAAA;AAAA;"}